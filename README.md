# TIDES
Transit ITS Data Exchange Specification (TIDES) for historical ITS data.

This repository references TIDES as described in the [prepublication report](https://nap.nationalacademies.org/catalog/26674/improving-access-and-management-of-public-transit-its-data).


## Files in Data Structure

| Filename | Required | Description | File Type |
|----------|----------|-------------|-----------|
Vehicle_locations |conditionally required | Timestamped vehicle locations and speeds. | Event |
Passenger_events | conditionally required | Timestamped passenger-related events, including boardings and alightings. | Event |
Fare_transactions |conditionally required | Timestamped fare transaction, associated with devices. | Event |
Stop_visits | required | Summarized boarding, alighting, arrival, departure, and other events (kneel engaged, ramp deployed, etc.) by trip and stop for each service date. | Summary |
Trips_performed | required | Trips performed for each service date. | Summary | Station_activities | conditionally required | Summarized transactions, entries, and exits by stop or station and time period for each service date (for events not associated with a trip). | Summary |
Devices | conditionally required | Measurement devices, such as AVL, APC, and AFC devices, associated with vehicles or stops or stations. | Supporting |
Train_cars | optional | Assets that comprise vehicles, such as train cars, with descriptive information. | Supporting |
Vehicle_train_cars | optional |Relationships between assets and vehicles. | Supporting
Vehicles | required | Vehicles, including buses and train consists, with descriptive information. | Supporting |
Operators | optional | Personnel who operate vehicles. | Supporting

### Files and Fields
The following tables correspond to each of the proposed files and list the field names, data types, field descriptions, and external references (where applicable) for each file. They also indicate whether fields are required. Unique identifiers for each file are in bold. Other required fields are used to link the files or as a basis for aggregation. It is not necessary for the tables to be ordered on their keys or in any other manner. Fields that are equivalent to fields in GTFS are defined as specified in GTFS. When referencing other files, the convention Filename.fieldname is used.


#### Vehicle_locations

This file contains timestamped vehicle location data at and between stops. Each row represents an individual timestamped location ping.

| Field Name            | Type                                                  | Required               | Description                                                                                                                                                                                                                                                                                                                                                                                     | External Reference |
|-----------------------|-------------------------------------------------------|------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
| date                  | date                                                  | required               | Service date.                                                                                                                                                                                                                                                                                                                                                                                   | GTFS               |
| timestamp             | POSIX time                                            | required               | Recorded event time.                                                                                                                                                                                                                                                                                                                                                                            |                    |
| location_ping_id      | ID                                                    | required               | Identifies the recorded vehicle location event.                                                                                                                                                                                                                                                                                                                                                 |                    |
| trip_id_performed     | ID referencing Trips_performed.trip_id_performed      | required               | Identifies the trip performed.                                                                                                                                                                                                                                                                                                                                                                  |                    |
| stop_sequence         | positive integer referencing Stop_times.stop_sequence | required               | Ordered stop the vehicle is approaching or serving on a particular trip.                                                                                                                                                                                                                                                                                                                        | GTFS               |
| vehicle_id            | ID referencing Vehicles.vehicle_id                    | required               | Identifies a vehicle.                                                                                                                                                                                                                                                                                                                                                                           |                    |
| device_id             | ID references Devices.device_id                       | conditionally required | Identifies the device that recorded the vehicle location. May be null if only a single device is reporting vehicle location and the device_id is not distinct from vehicle_id.                                                                                                                                                                                                                  |                    |
| stop_id               | ID referencing Stops.stop_id                          | optional               | Identifies the stop the vehicle is approaching or serving currently.                                                                                                                                                                                                                                                                                                                            | GTFS               |
| current_status        | enum                                                  | optional               | Indicates the status of the vehicle in reference to a stop. Valid options are: 0 - Incoming at.  1 - Stopped at.  2 - In transit to.                                                                                                                                                                                                                                                            | GTFS-Realtime      |
| latitude              | float                                                 | optional               | Degrees North, in the WGS-84 coordinate system.                                                                                                                                                                                                                                                                                                                                                 | GTFS-Realtime      |
| longitude             | float                                                 | optional               | Degrees East, in the WGS-84 coordinate system.                                                                                                                                                                                                                                                                                                                                                  | GTFS-Realtime      |
| gps_quality           | enum                                                  | optional               | Indicates the quality of data and communication provided by the GPS. Valid options are: 0 - Excellent. 1 - Good. 2 - Poor.                                                                                                                                                                                                                                                                      |                    |
| bearing               | float                                                 | optional               | Bearing, in degrees, clockwise from true north, e.g., 0 would mean north and 90 would mean east. This can be the compass bearing, or the direction towards the next stop or intermediate location. This should not be deduced from the sequence of previous positions, which clients can compute from previous data.                                                                            | GTFS-Realtime      |
| speed                 | float                                                 | optional               | Momentary speed measured by the vehicle, in meters per second.                                                                                                                                                                                                                                                                                                                                  | GTFS-Realtime      |
| odometer              | integer                                               | optional               | Odometer value, in meters.                                                                                                                                                                                                                                                                                                                                                                      | GTFS-Realtime      |
| schedule_deviation    | integer                                               | optional               | Indicates schedule adherence in seconds. A negative value represents an early vehicle. (An unscheduled trip would not have a scheduled deviation.)                                                                                                                                                                                                                                              |                    |
| headway_deviation     | integer                                               | optional               | Indicates headway adherence in seconds. A negative value represents a shorter than scheduled headway.                                                                                                                                                                                                                                                                                           |                    |
| in_service            | enum                                                  | optional               | Indicates status of travel with regard to service. Valid options are: 0 - The vehicle is in passenger service. 1 - The vehicle is en-route to service. 2 - The vehicle is traveling from a service trip. 3 - The vehicle is on a layover. 4 - The vehicle is returning to a garage due to a suspension or breakdown. 5 - Travel for on-route replacement of breakdown. 6 - Other not in service |                    |
| schedule_relationship | enum                                                  | optional               | Indicates the status of the stop. Valid options are: 0 - Scheduled. 1 - Skipped. 2 - Unscheduled. 3 - Canceled. 4 - Duplicated. 5 - Schedule modified.                                                                                                                                                                                                                                          |                    |

#### Passenger_events
This file contains each timestamped passenger-related event, including boardings and alightings, ramp deployments, bike rack usage, and kneel engagement.

|        Field Name       |                          Type                         |        Required        |                                                                                                                                                                                                     Description                                                                                                                                                                                                    | External Reference |
|:-----------------------:|:-----------------------------------------------------:|:----------------------:|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:------------------:|
| date                    | date                                                  | required               | Service date.                                                                                                                                                                                                                                                                                                                                                                                                      | GTFS               |
| timestamp               | POSIX time                                            | required               | Recorded event time, including for transactions that may be aggregated values associated with a trip or vehicle.                                                                                                                                                                                                                                                                                                   |                    |
| transaction_id          | ID                                                    | required               | Identifies the fare transaction.                                                                                                                                                                                                                                                                                                                                                                                   |                    |
| amount                  | currency                                              | required               | Value of the transaction.                                                                                                                                                                                                                                                                                                                                                                                          |                    |
| currency_type           | currency code                                         | required               | Currency used for the transaction.                                                                                                                                                                                                                                                                                                                                                                                 | GTFS               |
| fare_action             | enum                                                  | required               | Indicates the type of action performed. Valid options are: 0 - Unknown action type. 1 - Purchase. 2 - Enter (enter fare-controlled area or vehicle). 3 - Exit (exit fare-controlled area or vehicle). 4 - Transfer entrance. 5 - Transfer exit. 6 - Add (add stored value). 7 - Activate (activate a fare pass). 8 - Adjust (adjustment initiated by system or customer support). 9 - Other.                       |                    |
| trip_id_performed       | ID referencing Trips_performed.trip_id_performed      | conditionally required | Identifies the trip performed. May be null if the fare collection device is NOT located on a vehicle. May be null if on a vehicle but trip-level data is unavailable, in which case the data would be associated with the vehicle.                                                                                                                                                                                 |                    |
| stop_sequence           | positive integer referencing stop_times.stop_sequence | conditionally required | Ordered stop the vehicle is serving on a particular trip. May be null if the fare collection device is NOT located on a vehicle. May be null if on a vehicle but stop-level data is unavailable, in which case the data would be associated with the vehicle and/or trip.                                                                                                                                          | GTFS               |
| vehicle_id              | ID referencing vehicles.vehicle_id                    | conditionally required | Identifies the vehicle. May be null if collection device is NOT located on a vehicle. May be null if on a vehicle but vehicle data is unavailable, in which case the data would be associated with a trip and/or stop.                                                                                                                                                                                             |                    |
| device_id               | ID referencing devices.device_id                      | conditionally required | Identifies the ITS device on which the fare transaction was performed. May be null if only a single device is reporting fare transactions on a vehicle and vehicle_id is provided. May be null if only a single device is reporting fare transactions at a stop and stop_id is provided.                                                                                                                           |                    |
| fare_id                 | ID referencing Fare_attributes.fare_id                | optional               | Identifies a fare class, as included in the GTFS Fare_attributes file.                                                                                                                                                                                                                                                                                                                                             | GTFS               |
| stop_id                 | ID referencing stops.stop_id                          | optional               | Identifies the stop.                                                                                                                                                                                                                                                                                                                                                                                               | GTFS               |
| group_size              | positive integer                                      | optional               | The number of customers included in the transaction.                                                                                                                                                                                                                                                                                                                                                               |                    |
| media_type              | enum                                                  | optional               | Indicates the fare medium that was used for the transaction. Valid options are: 0 - Cash or coins.  1 - Smart card or ticket.  2 - Magnetic-stripe card or ticket.  3 - Bank card (credit or debit card). 4 - Mobile NFC (smartphone tap, etc.). 5 - Optical scan (of mobile app screen or paper ticket).  6 - Button pressed by driver or operator to indicate a boarding or alighting passenger. 7 - Other type. |                    |
| rider_category          | text                                                  | optional               | Indicates rider category (categories defined by transit agency). For example: Adult Youth Student Senior Other reduced                                                                                                                                                                                                                                                                                             |                    |
| fare_product            | text                                                  | optional               | Indicates the fare group (fare groups defined by transit agency). For example: Single ride Pass Employer sponsored Other pass                                                                                                                                                                                                                                                                                      |                    |
| fare_period             | text                                                  | optional               | Indicates the fare period (fare periods defined by transit agency). For example: All day Peak Off-peak Summer Other                                                                                                                                                                                                                                                                                                |                    |
| fare_capped             | enum                                                  | optional               | Indicates if fare capping is in effect (fare capping options defined by transit agency). Valid options are: 0 - Fare is not capped. 1 - Fare is capped.                                                                                                                                                                                                                                                            |                    |
| fare_media_id           | ID                                                    | optional               | Identifies the individual fare medium used for the transaction. For example, the fare card ID.                                                                                                                                                                                                                                                                                                                     |                    |
| fare_media_id_purchased | ID                                                    | optional               | Identifies the individual fare medium purchased in the transaction. For example, the fare card ID.                                                                                                                                                                                                                                                                                                                 |                    |
| balance                 | float                                                 | optional               | Stored value remaining on an account after the transaction is made. |        

#### Fare_transactions
This file contains timestamped fare transactions with relevant fare media and amount information. It includes transactions on board vehicles as well as transactions at stops, stations, and through mobile systems. Records in this file include passengers paying fares, as well as adding value to their fare media or purchasing a pass. Each of these actions constitutes a separate record in the Fare_transactions file.

The Fare_transactions file includes several fields to describe the fare category or group, which transit agencies may customize to define categories that are appropriate for their agency.

|        Field Name       |                          Type                         |        Required        |                                                                                                                                                                                                     Description                                                                                                                                                                                                    | External Reference |
|:-----------------------:|:-----------------------------------------------------:|:----------------------:|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:------------------:|
| date                    | date                                                  | required               | Service date.                                                                                                                                                                                                                                                                                                                                                                                                      | GTFS               |
| timestamp               | POSIX time                                            | required               | Recorded event time, including for transactions that may be aggregated values associated with a trip or vehicle.                                                                                                                                                                                                                                                                                                   |                    |
| transaction_id          | ID                                                    | required               | Identifies the fare transaction.                                                                                                                                                                                                                                                                                                                                                                                   |                    |
| amount                  | currency                                              | required               | Value of the transaction.                                                                                                                                                                                                                                                                                                                                                                                          |                    |
| currency_type           | currency code                                         | required               | Currency used for the transaction.                                                                                                                                                                                                                                                                                                                                                                                 | GTFS               |
| fare_action             | enum                                                  | required               | Indicates the type of action performed. Valid options are: 0 - Unknown action type. 1 - Purchase. 2 - Enter (enter fare-controlled area or vehicle). 3 - Exit (exit fare-controlled area or vehicle). 4 - Transfer entrance. 5 - Transfer exit. 6 - Add (add stored value). 7 - Activate (activate a fare pass). 8 - Adjust (adjustment initiated by system or customer support). 9 - Other.                       |                    |
| trip_id_performed       | ID referencing Trips_performed.trip_id_performed      | conditionally required | Identifies the trip performed. May be null if the fare collection device is NOT located on a vehicle. May be null if on a vehicle but trip-level data is unavailable, in which case the data would be associated with the vehicle.                                                                                                                                                                                 |                    |
| stop_sequence           | positive integer referencing stop_times.stop_sequence | conditionally required | Ordered stop the vehicle is serving on a particular trip. May be null if the fare collection device is NOT located on a vehicle. May be null if on a vehicle but stop-level data is unavailable, in which case the data would be associated with the vehicle and/or trip.                                                                                                                                          | GTFS               |
| vehicle_id              | ID referencing vehicles.vehicle_id                    | conditionally required | Identifies the vehicle. May be null if collection device is NOT located on a vehicle. May be null if on a vehicle but vehicle data is unavailable, in which case the data would be associated with a trip and/or stop.                                                                                                                                                                                             |                    |
| device_id               | ID referencing devices.device_id                      | conditionally required | Identifies the ITS device on which the fare transaction was performed. May be null if only a single device is reporting fare transactions on a vehicle and vehicle_id is provided. May be null if only a single device is reporting fare transactions at a stop and stop_id is provided.                                                                                                                           |                    |
| fare_id                 | ID referencing Fare_attributes.fare_id                | optional               | Identifies a fare class, as included in the GTFS Fare_attributes file.                                                                                                                                                                                                                                                                                                                                             | GTFS               |
| stop_id                 | ID referencing stops.stop_id                          | optional               | Identifies the stop.                                                                                                                                                                                                                                                                                                                                                                                               | GTFS               |
| group_size              | positive integer                                      | optional               | The number of customers included in the transaction.                                                                                                                                                                                                                                                                                                                                                               |                    |
| media_type              | enum                                                  | optional               | Indicates the fare medium that was used for the transaction. Valid options are: 0 - Cash or coins.  1 - Smart card or ticket.  2 - Magnetic-stripe card or ticket.  3 - Bank card (credit or debit card). 4 - Mobile NFC (smartphone tap, etc.). 5 - Optical scan (of mobile app screen or paper ticket).  6 - Button pressed by driver or operator to indicate a boarding or alighting passenger. 7 - Other type. |                    |
| rider_category          | text                                                  | optional               | Indicates rider category (categories defined by transit agency). For example: Adult Youth Student Senior Other reduced                                                                                                                                                                                                                                                                                             |                    |
| fare_product            | text                                                  | optional               | Indicates the fare group (fare groups defined by transit agency). For example: Single ride Pass Employer sponsored Other pass                                                                                                                                                                                                                                                                                      |                    |
| fare_period             | text                                                  | optional               | Indicates the fare period (fare periods defined by transit agency). For example: All day Peak Off-peak Summer Other                                                                                                                                                                                                                                                                                                |                    |
| fare_capped             | enum                                                  | optional               | Indicates if fare capping is in effect (fare capping options defined by transit agency). Valid options are: 0 - Fare is not capped. 1 - Fare is capped.                                                                                                                                                                                                                                                            |                    |
| fare_media_id           | ID                                                    | optional               | Identifies the individual fare medium used for the transaction. For example, the fare card ID.                                                                                                                                                                                                                                                                                                                     |                    |
| fare_media_id_purchased | ID                                                    | optional               | Identifies the individual fare medium purchased in the transaction. For example, the fare card ID.                                                                                                                                                                                                                                                                                                                 |                    |
| balance                 | float                                                 | optional               | Stored value remaining on an account after the transaction is made.                                                                                                                                                     

#### Stop_visits
This file contains a record for each stop for each trip and service date. It includes all the data needed to generate the KPIs at a stop visit level. This is distinct from the Station_activities file as each record in this file is associated with a stop and trip, whereas the stop, or “station,” activities in the Station_activities file are not associated with a trip. This file is linked to the Event Data Files through the stop_sequence, trip_id_performed, and vehicle_id fields.

There are two optional sets of fields that represent transaction revenue and transaction counts by fare medium. In Table 7, transaction_revenue_x and transaction_count_x, each represent 8 distinct fields recording transaction revenue and transaction counts for 8 potential types of fare media.

| Field Name              | Type                                                  | Required | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | External Reference |
|-------------------------|-------------------------------------------------------|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
| date                    | date                                                  | required | Service date.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | GTFS               |
| trip_id_performed       | ID referencing Trips_performed.trip_id_performed      | required | Identifies the trip performed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                    |
| stop_sequence           | positive integer referencing Stop_times.stop_sequence | required | Ordered stop the vehicle is serving on a particular trip.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | GTFS               |
| vehicle_id              | ID referencing vehicles.vehicle_id                    | required | Identifies the vehicle.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                    |
| dwell                   | integer                                               | optional | Indicates the amount of time a vehicle spent stopped at a stop in seconds.                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                    |
| stop_id                 | ID referencing stops.stop_id                          | optional | Identifies the stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | GTFS               |
| checkpoint              | enum                                                  | optional | Indicates of the stop should be used for evaluating schedule adherence, on-time performance, and other KPIs. This could be populated to match the GTFS “timepoint” field. Valid options are: 0 - Stop is not used in evaluating KPIs. 1 or empty - Stop is used in evaluating KPIs.                                                                                                                                                                                                                                             |                    |
| schedule_arrival_time   | POSIX time                                            | optional | Scheduled time at which the vehicle arrives at a stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | GTFS               |
| schedule_departure_time | POSIX time                                            | optional | Scheduled time at which the vehicle departs from a stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | GTFS               |
| actual_arrival_time     | POSIX time                                            | optional | Time at which the vehicle arrives at a stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                    |
| actual_departure_time   | POSIX time                                            | optional | Time at which the vehicle departs from a stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                    |
| distance                | integer                                               | optional | Observed distance in meters from the previous stop traveled by the vehicle.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                    |
| boarding_1              | integer                                               | optional | Number of riders that entered the front-most or right-most door of the vehicle                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                    |
| alighting_1             | integer                                               | optional | Number of riders that exited the front-most or right-most door of the vehicle                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                    |
| boarding_2              | integer                                               | optional | Number of riders that entered the rest of the vehicle’s doors.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                    |
| alighting_2             | integer                                               | optional | Number of riders that exited the rest of the vehicle’s doors.                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                    |
| load                    | integer                                               | optional | Number of riders on the vehicle when departing the stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                    |
| door_open               | POSIX time                                            | optional | Time at which the doors opened.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                    |
| door_close              | POSIX time                                            | optional | Time at which the doors closed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                    |
| door_status             | text                                                  | optional | Indicates actions of the doors during the stop visit. For example: -Doors did not open -Front door opened and back doors remain closed -Back doors opened and front door remained closed -All doors opened -Other configuration                                                                                                                                                                                                                                                                                                 |                    |
| ramp_deployed_time      | float                                                 | optional | Duration of time a ramp is deployed, in seconds.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                    |
| ramp_failure            | enum                                                  | optional | Indicates if the ramp deployment failed at a stop. Valid options are:  0 - Ramp deployment successful.  1 - Ramp deployment failed.                                                                                                                                                                                                                                                                                                                                                                                             |                    |
| kneel_deployed_time     | float                                                 | optional | Duration of time a kneel is deployed in seconds.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                    |
| lift_deployed_time      | float                                                 | optional | Duration of time in seconds of time a lift is deployed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                    |
| bike_rack_deployed      | enum                                                  | optional | Indicates if the bike rack was deployed at a stop. Valid options are: 0 - Bike rack was not deployed.  1 - Bike rack was deployed.                                                                                                                                                                                                                                                                                                                                                                                              |                    |
| bike_load               | integer                                               | optional | Number of bikes on the vehicle when departing the stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                    |
| revenue                 | currency                                              | optional | Amount of revenue collected at the stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                    |
| number_of_transactions  | non-negative integer                                  | optional | Number of fare transactions that occurred at a stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                    |
| transaction_revenue_x   | currency                                              | optional | Indicates the revenue from a specified fare medium. For example, cash revenue would be represented by the field name transaction_revenue_0. Valid values for x are: 0 - Cash or coins.  1 - Smart card or ticket.  2 - Magnetic-stripe card or ticket.  3 - Bank card (credit or debit card). 4 - Mobile NFC (smartphone tap, etc.). 5 - Optical scan (of mobile app screen or paper ticket).  6 - Button pressed by driver or operator to indicate a boarding or alighting passenger. 7 - Other type.                          |                    |
| transaction_count_x     | Non-negative integer                                  | optional | Number of fare transactions made by a specified fare medium. For example, the count of cash transactions would be represented by the field name transaction_count_0. Valid values for x are: 0 - Cash or coins.  1 - Smart card or ticket.  2 - Magnetic-stripe card or ticket.  3 - Bank card (credit or debit card). 4 - Mobile NFC (smartphone tap, etc.). 5 - Optical scan (of mobile app screen or paper ticket).  6 - Button pressed by driver or operator to indicate a boarding or alighting passenger. 7 - Other type. |                    |
| schedule_relationship   | enum                                                  | optional | Indicates the status of stop’s service on the trip. Valid options are:  0 - Scheduled.  1 - Skipped.  2 - Missing data.  3 - Unscheduled.  4 - Canceled.  5 - Duplicated.  6 - Schedule modified. (Note: schedule_arrival_time and schedule_departure_time may differ from GTFS in this case.) |

#### Station_activities
This file contains data that is associated with a specific stop or station grouped by time period for each service date. These time periods should be defined by each transit agency and may overlap. Data is included in this file when it is collected by a fare device that is located at the entrance to a stop or station (e.g., subway station) that provides access to multiple platforms making it unclear which trip the data is associated with. The Station_activities file is linked directly to the Fare_transactions data file through the stop_id field.

Like Stop_visits, Station_activities includes two optional sets of fields that represent transaction revenue and transaction counts by fare medium. In `Station_activities`, transaction_revenue_x and transaction_count_x, each represent 8 distinct fields recording transaction revenue and transaction counts for 8 potential types of fare media.

| Field Name              | Type                                                  | Required | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | External Reference |
|-------------------------|-------------------------------------------------------|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
| date                    | date                                                  | required | Service date.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | GTFS               |
| trip_id_performed       | ID referencing Trips_performed.trip_id_performed      | required | Identifies the trip performed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                    |
| stop_sequence           | positive integer referencing Stop_times.stop_sequence | required | Ordered stop the vehicle is serving on a particular trip.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | GTFS               |
| vehicle_id              | ID referencing vehicles.vehicle_id                    | required | Identifies the vehicle.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                    |
| dwell                   | integer                                               | optional | Indicates the amount of time a vehicle spent stopped at a stop in seconds.                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                    |
| stop_id                 | ID referencing stops.stop_id                          | optional | Identifies the stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | GTFS               |
| checkpoint              | enum                                                  | optional | Indicates of the stop should be used for evaluating schedule adherence, on-time performance, and other KPIs. This could be populated to match the GTFS “timepoint” field. Valid options are: 0 - Stop is not used in evaluating KPIs. 1 or empty - Stop is used in evaluating KPIs.                                                                                                                                                                                                                                             |                    |
| schedule_arrival_time   | POSIX time                                            | optional | Scheduled time at which the vehicle arrives at a stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | GTFS               |
| schedule_departure_time | POSIX time                                            | optional | Scheduled time at which the vehicle departs from a stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | GTFS               |
| actual_arrival_time     | POSIX time                                            | optional | Time at which the vehicle arrives at a stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                    |
| actual_departure_time   | POSIX time                                            | optional | Time at which the vehicle departs from a stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                    |
| distance                | integer                                               | optional | Observed distance in meters from the previous stop traveled by the vehicle.                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                    |
| boarding_1              | integer                                               | optional | Number of riders that entered the front-most or right-most door of the vehicle                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                    |
| alighting_1             | integer                                               | optional | Number of riders that exited the front-most or right-most door of the vehicle                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                    |
| boarding_2              | integer                                               | optional | Number of riders that entered the rest of the vehicle’s doors.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                    |
| alighting_2             | integer                                               | optional | Number of riders that exited the rest of the vehicle’s doors.                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                    |
| load                    | integer                                               | optional | Number of riders on the vehicle when departing the stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                    |
| door_open               | POSIX time                                            | optional | Time at which the doors opened.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                    |
| door_close              | POSIX time                                            | optional | Time at which the doors closed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                    |
| door_status             | text                                                  | optional | Indicates actions of the doors during the stop visit. For example: -Doors did not open -Front door opened and back doors remain closed -Back doors opened and front door remained closed -All doors opened -Other configuration                                                                                                                                                                                                                                                                                                 |                    |
| ramp_deployed_time      | float                                                 | optional | Duration of time a ramp is deployed, in seconds.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                    |
| ramp_failure            | enum                                                  | optional | Indicates if the ramp deployment failed at a stop. Valid options are:  0 - Ramp deployment successful.  1 - Ramp deployment failed.                                                                                                                                                                                                                                                                                                                                                                                             |                    |
| kneel_deployed_time     | float                                                 | optional | Duration of time a kneel is deployed in seconds.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                    |
| lift_deployed_time      | float                                                 | optional | Duration of time in seconds of time a lift is deployed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                    |
| bike_rack_deployed      | enum                                                  | optional | Indicates if the bike rack was deployed at a stop. Valid options are: 0 - Bike rack was not deployed.  1 - Bike rack was deployed.                                                                                                                                                                                                                                                                                                                                                                                              |                    |
| bike_load               | integer                                               | optional | Number of bikes on the vehicle when departing the stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                    |
| revenue                 | currency                                              | optional | Amount of revenue collected at the stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                    |
| number_of_transactions  | non-negative integer                                  | optional | Number of fare transactions that occurred at a stop.                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                    |
| transaction_revenue_x   | currency                                              | optional | Indicates the revenue from a specified fare medium. For example, cash revenue would be represented by the field name transaction_revenue_0. Valid values for x are: 0 - Cash or coins.  1 - Smart card or ticket.  2 - Magnetic-stripe card or ticket.  3 - Bank card (credit or debit card). 4 - Mobile NFC (smartphone tap, etc.). 5 - Optical scan (of mobile app screen or paper ticket).  6 - Button pressed by driver or operator to indicate a boarding or alighting passenger. 7 - Other type.                          |                    |
| transaction_count_x     | Non-negative integer                                  | optional | Number of fare transactions made by a specified fare medium. For example, the count of cash transactions would be represented by the field name transaction_count_0. Valid values for x are: 0 - Cash or coins.  1 - Smart card or ticket.  2 - Magnetic-stripe card or ticket.  3 - Bank card (credit or debit card). 4 - Mobile NFC (smartphone tap, etc.). 5 - Optical scan (of mobile app screen or paper ticket).  6 - Button pressed by driver or operator to indicate a boarding or alighting passenger. 7 - Other type. |                    |
| schedule_relationship   | enum                                                  | optional | Indicates the status of stop’s service on the trip. Valid options are:  0 - Scheduled.  1 - Skipped.  2 - Missing data.  3 - Unscheduled.  4 - Canceled.  5 - Duplicated.  6 - Schedule modified. (Note: schedule_arrival_time and schedule_departure_time may differ from GTFS in this case.) |

#### Trips_performed
This file contains a record for each trip for each service date, including both scheduled and unscheduled trips as well as in service and not in service trips. This file contains data required to generate KPIs at the trip level. It is linked to the Stop_visits file through the trip_id_performed field, linked to the Vehicles file through the vehicle_id field, and linked to the Operators file through the operator_id field.

| Field Name            | Type                                             | Required | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | External Reference |
|-----------------------|--------------------------------------------------|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
| date                  | date                                             | required | Service date.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | GTFS               |
| trip_id_performed     | ID                                               | required | Identifies the trip performed.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                    |
| vehicle_id            | ID referencing Vehicles.vehicle_id               | required | Identifies the vehicle.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |                    |
| trip_id_scheduled     | ID referencing Trips.trip_id in GTFS             | optional | Identifies the scheduled trip associated with the trip performed. One scheduled trip may be associated with multiple operated trips, or an operated trip may not be associated with a scheduled trip.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | GTFS               |
| route_id              | ID referencing Routes.route_id                   | optional | Identifies the route.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | GTFS               |
| route_type            | enum                                             | optional | Indicates the type of transportation used on a route. Valid options are: 0 - Tram, Streetcar, Light rail. Any light rail or street level system within a metropolitan area. 1 - Subway, Metro. Any underground rail system within a metropolitan area. 2 - Rail. Used for intercity or long-distance travel. 3 - Bus. Used for short- and long-distance bus routes. 4 - Ferry. Used for short- and long-distance boat service. 5 - Cable tram. Used for street-level rail cars where the cable runs beneath the vehicle, e.g., cable car in San Francisco. 6 - Aerial lift, suspended cable car (e.g., gondola lift, aerial tramway). Cable transport where cabins, cars, gondolas, or open chairs are suspended by means of one or more cables. 7 - Funicular. Any rail system designed for steep inclines. 11 - Trolleybus. Electric buses that draw power from overhead wires using poles. 12 - Monorail. Railway in which the track consists of a single rail or a beam. | GTFS               |
| pattern_id            | ID referencing proposed trips.pattern_id in GTFS | optional | Identifies the exact service and path on the route.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | GTFS               |
| shape_id              | ID referencing Shapes.shape_id                   | optional | Identifies a geospatial shape that describes the vehicle travel path for a trip.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | GTFS               |
| direction_id          | enum                                             | optional | Indicates the direction of travel for a trip. Valid options are:  0 - Travel in one direction (e.g., outbound travel).  1 - Travel in the opposite direction (e.g., inbound travel).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | GTFS               |
| operator_id           | ID referencing Operators.operator_id             | optional | Identifies the vehicle’s operator.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |                    |
| block_id              | ID                                               | optional | Identifies the block to which the trip belongs. A block consists of a single trip, or many sequential trips made using the same vehicle, defined by shared service days and block_id. A block_id can have trips with different service days, making distinct blocks. See example in GTFS documentation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | GTFS               |
| trip_start_stop_id    | ID referencing stops.stop_id                     | optional | Origin stop_id.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                    |
| trip_end_stop_id      | ID referencing stops.stop_id                     | optional | Destination stop_id.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |                    |
| schedule_trip_start   | POSIX time                                       | optional | Scheduled departure time from the trip’s origin.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                    |
| schedule_trip_end     | POSIX time                                       | optional | Scheduled end time at the trip’s destination.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                    |
| actual_trip_start     | POSIX time                                       | optional | Time at which the vehicle departed its origin.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                    |
| actual_trip_end       | POSIX time                                       | optional | Time at which the vehicle arrived at its destination.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                    |
| in_service            | enum                                             | optional | Indicates status of travel with regard to service. Valid options are: 0 - The vehicle is in passenger service. 1 - The vehicle is en-route to service. 2 - The vehicle is traveling from a service trip. 3 - The vehicle is on a layover. 4 - The vehicle is returning to a garage due to a suspension or breakdown. 5 - Travel for on-route replacement of breakdown. 6 - Other not in service                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                    |
| schedule_relationship |                       enum                       | optional |                                                                                                                                                                                                                                                                                                                                                                                                   Indicates the status of the trip. Valid options are: 0 - Scheduled. 1 - Skipped. 2 - Missing data. 3 - Unscheduled. 4 - Canceled. 5 - Duplicated. 6 - Schedule modified.  |                                                                          

#### Devices
This file contains information pertaining to the AVL, APC, and AFC devices. Each device has a unique device_id. On-board devices are associated with a vehicle_id and stationary devices are associated with a stop_id. This file is linked to the Event Data Files, which records individual timestamped records that are obtained by individual devices. If only Summary Data Files are used, the Devices file is not required.

|   Field Name  |                  Type                 |        Required        |                                                                                                          Description                                                                                                          | External Reference |
|:-------------:|:-------------------------------------:|:----------------------:|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:------------------:|
| device_id     | ID                                    | required               | Identifies a device. If possible, this should match other internal agency device IDs.                                                                                                                                         |                    |
| stop_id       | ID referencing Stops.stop_id          | conditionally required | Identifies the stop at which the device is located. May be null if the device is on a vehicle.                                                                                                                                | GTFS               |
| vehicle_id    | ID referencing Vehicles.vehicle_id    | conditionally required | Identifies the vehicle on which the device is located. May be null if the device is at a stop or station.                                                                                                                     |                    |
| train_car_id  | ID referencing Train_car.train_car_id | conditionally required | Identifies the train car or asset on which the device is located. May be null if the device is at a stop or station or if the Train_cars file is not used.                                                                    |                    |
| device_type   | enum                                  | optional               | Indicates the type of device. Valid options are: 0 - APC.  1 - AFC.  2 - AVL.  3 - Other.                                                                                                                                     |                    |
| device_vendor | text                                  | optional               | Vendor of the device.                                                                                                                                                                                                         |                    |
| device_model  | text                                  | optional               | Model of the device as specified by the vendor.    |       
| location      | text                                  | optional               | Indicates the location of a device on the vehicle or at a station. For example: Front door. Back door. Entrance (not located on a vehicle). Exit (not located on a vehicle). Entrance/exit (not located on a vehicle). Other. |                    |


#### Vehicles
This file contains information on vehicles, which are associated with trips through the vehicle_id field in the Trips_performed file. Since vehicles that consist of multiple train cars may change over time, each vehicle_id is associated with a start time and an end time, if applicable.

| Field Name          | Type                 | Required               | Description                                                                                                                                                                              | External Reference |
|---------------------|----------------------|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
| vehicle_id          | ID                   | required               | Identifies a vehicle, such as a bus or a train consist. If possible, this should match other internal agency vehicle IDs and the GTFS-realtime VehicleDescriptor.                        |                    |
| vehicle_start       | POSIX time           | conditionally required | The time at which the vehicle or train consist is first in operation (i.e., when the consist has been created). Required if Train_car is used.                                           |                    |
| vehicle_end         | POSIX time           | optional               | The time at which the vehicle or train consist no longer exists (i.e., the consist is separated or modified). Only used if Train_car is used.                                            |                    |
| model_name          | text                 | optional               | Describes the vehicle’s model.                                                                                                                                                           |                    |
| facility_name       | text                 | optional               | Name or internal agency ID for the facility where the vehicle is generally held.                                                                                                         |                    |
| capacity_seated     | non-negative integer | optional               | Number of seats on the vehicle. Used if Train_car is not used.                                                                                                                           |                    |
| wheelchair_capacity | non-negative integer | optional               | Number of wheelchair spaces on the vehicle. Used if Train_car is not used.                                                                                                               |                    |
| capacity_bike       | non-negative integer | optional               | Number of bike spaces on the vehicle. Used if Train_car is not used.                                                                                                                     |                    |
| bike_rack           | enum                 | optional               | Indicates if the vehicle has a useable bike rack. Used if Train_car is not used. Valid options are: 0 - Vehicle has a useable bike rack.  1 - Vehicle does not have a useable bike rack. |                    |
| capacity_standing   | non-negative integer | optional               | Standing capacity of the vehicle set by the manufacturer. Used if Train_car is not used.  |

#### Train_cars

This optional file contains information pertaining to individual assets within a vehicle, such as an individual subway car within a train consist and is used only when an agency uses vehicles that are comprised of multiple assets. Agencies that use only single-asset vehicles (most typically buses) should not use this file.

| Field Name          | Type                 | Required | Description                                                                                                                                                   | External Reference |
|---------------------|----------------------|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------|
| train_car_id        | ID                   | required | Identifies a train car or asset. If possible, this should match other internal agency asset IDs.                                                              |                    |
| model_name          | text                 | optional | Describes the train car or asset’s model.                                                                                                                     |                    |
| facility_name       | text                 | optional | Name or internal agency ID for the facility where the train car or asset is generally held.                                                                   |                    |
| capacity_seated     | non-negative integer | optional | Number of seats on the train car or asset.                                                                                                                    |                    |
| wheelchair_capacity | non-negative integer | optional | Number of wheelchair spaces on the train car or asset.                                                                                                        |                    |
| bike_capacity       | non-negative integer | optional | Number of bike spaces on the train car or asset.                                                                                                              |                    |
| bike_rack           | enum                 | optional | Indicates if the train car or asset has a usable bike rack. Valid options are: 0 - Asset has a usable bike rack.  1 - Asset does not have a usable bike rack. |                    |
| capacity_standing   | non-negative integer | optional | Standing capacity of the train car or asset set by the manufacturer.                                                                                          |                    |
| train_car_type      | enum                 | optional | Indicates the type of train car or asset. Valid options are: 0 - Train car. 1 - Trolley. 2 - Other.      |        |                                                                                                                                               

#### Vehicle_train_cars
This optional file contains information to match individual assets (train cars) to vehicles (train consists). This file should only be used by agencies that operate multi-asset vehicles (typically multi-car trains) and are using the Train_car file. Each row in this file represents a train car and multiple train cars are expected to be associated with a single vehicle. A single train_car_id may be associated with multiple vehicle_ids, even with overlapping start and end times in the Vehicles file. This could happen in cases where vehicles frequently enter and leave service (i.e., two vehicle_ids are used to represent different directions of travel for a subway train with a specified car order).

| Field Name   | Type                                  | Required | Description                                                                                                      | External Reference |
|--------------|---------------------------------------|----------|------------------------------------------------------------------------------------------------------------------|--------------------|
| vehicle_id   | ID referencing vehicles.vehicle_id    | required | Identifies a vehicle, such as a train consist. If possible, this should match other internal agency vehicle IDs. |                    |
| train_car_id | ID referencing train_car.train_car_id | required | Identifies a train car or an asset that is a component of the vehicle.                                           |                    |
| order        | non-negative integer                  | optional | The assigned order of the train car or asset within the vehicle.                                                 |                    |

#### Operators
This optional file contains a list of agency staff or contractors that operate vehicles that may be used when generating operator specific KPIs. It can be linked to the Trips_performed file using the operator_id field. Agencies may add other relevant fields they use to generate KPIs.

| Field Name  | Type | Required | Description                                                                                | External Reference |
|-------------|------|----------|--------------------------------------------------------------------------------------------|--------------------|
| operator_id | ID   | required | Identifies an operator. If possible, this should match other internal agency operator IDs. |                    |                                                                                
